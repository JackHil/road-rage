# TODO #

####################################################################################################
### Current projects

# Trip distribution #

- residence -> house
- poisson, other distributions for location, time? rename existing stuff to be clear about uniform.
- repository of detailed cities with demand data?

# Website #

- setup instructions
  - make scripts use deps from sbt. even scala!
  - eclipse, sbt tutorials
- better layout
  - contact me
- screenshots
- about/features page
- tutorials for using, experimenting
- advertise on OSM wiki
- tutorials for lil experiments
  - actuator roads before equal mode
  - braess paradox and adding a road
- tutorial for v2v

# Traditional traffic engr #

- blog it!
  - neglect different turns
  - if theres no data for a link at some point, assume itll be freeflow (but the intersection...)
- do multiple sims, changing some routes using time-dep A* and these records

# Code cleanup #

- rename edges as lanes, and directed roads as links? policy -> controller? vertex -> junction?
- hard to have multiple sims due to objects with state: Common, CHRouter, Graph (norm coords), system
  wallets, AgentMap, ReplayDiffScheme, GUI
- https://github.com/scala/pickling
- consider onewayroad type
- reduce vars and publics
- distance/time types
- immutable constructs with mutable builders
- merge headless/gui clients
- group all LC code together, etc, but in individ classes via traits

# Experiment framework #

- mode to run many things locally, in parallel
- better R templates, or another solution
- port old experiments
- even record the parameters of the runs?

# Intersection policies #

- traffic lights shouldnt have long yellow
- reservation protocol should actually be faster. opportunistic.
  - michael's refined notion of turn conflict
- yield policy
- unprotected left, right turn on red, better stop sign
- if easy: backpressure lights
- consider a common case policy, in places like claycut rd
- for better lights, want to defer decision... can we do that now?
- optimize fixpoints

####################################################################################################
### Future projects

# Bugs #

- agents not stopping at exactly the right dist the first time
- savestating
  - bad filenames when saving from a loaded savestate
  - resumable logging doesnt really work if they simulated past the savestate...

# Auctions #

- sysbids
  - doubles
  - tune
  - divide
  - new one to help people at the end of trip (since theyll leave the system)
- multiple bids for same item.. handle that
- system bid: bonus to reservation if i'll take the same time as somebody else
- better wallet than fair. (but its not only problem, fixed mode is also borked)

# Clown Car #

- D*Lite (blog, reddit)
- be very careful with freeflow capacity and cutoffs. (too many people denied from useful roads.)
- take into account time and cost simultaneously
- regular rerouting
- tolls justified thru fundamental diagram

# Debugging, info, etc #

- different measure of live vs moved agents. cumulative
- debugging useful: warn when turn not used for a while, and when agent caught in a long loop
- metrics for how many reroutes necessary (grouped by cause), how many failed LCs
- is it even valid to consider results from first/last agents? need steady-state.
- measure how long a vehicle spends thrashing about bc original path is congested

# Traffic model simplification #

- dont mess with gps coords, and have a more boring dist fxn

# Hard realism #

- different agent params
- tune all params

# Tests #

- how?
- wacky cases of 2 side-by-side agents wanting to swap places?

# Performance: misc #

- .view, .withFilter
- turn blocked invariant, really maintain it for efficiency!
  just look at the next guy. BUT we can be route-done, but have somebody blocking in front of us
  initially. so in that case, search forward?
  - this only happens because we join a queue without demanding invariants of stuff in front of us

# Performance: fastpaths #

- agents and intersections could wake each other up now

# Performance: parallelization #

- PARALLEL DETERMINISM INVALID: queue avail_slots

# Map making #

- not sure: if LC dist is > road dist, super problems
- min lengths should matter for lanes everywhere, not roads
- degenerate verts should have same num of lanes
- num of lanes bounded by num of times could LC
- floating vertices due to nuking all roads that lead up to it, and choosing
  the vert to keep poorly
- not seeing any geometry is a bit disconcerting... gov st
- handle cul de sacs once and for all... bernwood is example in BR. remove if
  only one other link?
- dont tie map filename to the serialized thing
- xml output too for non-aorta clients
- make turns better, more systematically
  - try to not remove pieces of maps at all
- use http://wiki.openstreetmap.org/wiki/Relation:restriction
- lots of things break in sim logic if we have a vertex with a self-loop

# 3D GUI: Base #

- make a thing to change some constants online...
- port all content things to lwjgl
- better overhead controls
- perspective camera
- 3D buildings

# UI #

- step one tick
- visualize red/green lights better
- cmdline switch to follow stuff or zoom in somewhere
- visualize lookahead
- right click context menus
- show 'fps' in viewer
- side by side runs
